<!DOCTYPE html>
<html>
  <head>
		<title>Bachelorprosjekt</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<style>
			img {
				display: block;
				margin: 0px auto;
			}
		</style>
  </head>
  <body>

		<span>
				<img id="xy" src="skinn.jpg" alt="skinn" width="600" height="400">
		</span>
		<p id="tekst"></p>

		<audio id="bird" controls autoplay loop>
			<source  src="http://10.22.140.209:8081/bird.mp3" type="audio/mp3">
			<p>Your browser is shit</p>
		</audio>

		<audio id="waves" controls autoplay loop>
			<source id="waves" src="http://10.22.140.209:8081/waves.mp3" type="audio/mp3">
			<p>Your browser is shit</p>
		</audio>

	<script>


//############## Audio ###############################################
			//Web audio api context
			var audioCtx = new (window.AudioContext || window.webkitAudioContext)();

			//Henter lydkilder, setter til variabler
			var myAudio1 = document.getElementById("bird");
			var myAudio2 = document.getElementById("waves");

			myAudio1.volume = 0.5;
			myAudio2.volume = 0.5;
			/*
			var myAudio3 = document.getElementById("thunder");
			var myAudio4 = document.getElementById("wind");
			*/
			//Lager MediaElementAudioSourceNodes
			var bird = audioCtx.createMediaElementSource(myAudio1);
			var waves= audioCtx.createMediaElementSource(myAudio2);
			/*
			var thunder = audioCtx.createMediaElementSource("myAudio3");
			var wind = audioCtx.createMediaElementSource("myAudio4");
			*/
			//Lager gain node
			var gainNode = audioCtx.createGain();

			//############### XY-posisjon #########################################
			xy.addEventListener("mouseleave", stopAudio);

		
			$("#xy").mousemove(function ( e ) {
	
				var pos   = $(this).offset();
				var elPos = { X:pos.left , Y:pos.top };
				var mPos  = { X:e.clientX-elPos.X, Y:e.clientY-elPos.Y };
				var x = mPos.X;
				var y = mPos.Y;
				var coor = "x:"+ x +" y:"+ y; 
				document.getElementById("tekst").innerHTML = coor;

				myAudio1.volume = y/400;
				console.log(myAudio1.volume);

				myAudio2.volume = x/600;
				console.log(myAudio2.volume);
			});
			function stopAudio(){
				myAudio1.volume = 0;
				myAudio2.volume = 0;
			}
			bird.connect(gainNode);
			waves.connect(gainNode);

			gainNode.connect(audioCtx.destination);

	</script>
  </body>
</html>